<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta charset="utf-8" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>角色权限管理</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap-3.3.5/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/SB-admin-2-1.0.8/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../../css/SB-admin-2-1.0.8/bower_components/font-awesome/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- DataTables CSS -->
    <link href="../../css/SB-admin-2-1.0.8/bower_components/datatables-plugins/integration/bootstrap3/dataTables.bootstrap.css" rel="stylesheet">

    <!-- DataTables Responsive CSS -->
    <link href="../../css/SB-admin-2-1.0.8/bower_components/datatables-responsive/responsive.dataTables.scss" rel="stylesheet">

    <!-- Bern Custom CSS -->
    <link href="../../css/ifram-common.css" rel="stylesheet">
</head>
<body>
<!-- Modal -->
<div class="modal fade" id="addRole" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel"><label class="text-info">新增角色</label></h4>
            </div>
            <div class="modal-body">
                <form action="">
                    <div class="form-group">
                        <label>角色名称</label>
                        <input class="form-group" name="roleName" id="roleName" required>
                        <p class="help-block text-info">必填</p>
                    </div>
                    <!-- TODO: -->
                    <div class="form-group">
                        <label>角色描述信息</label>
                        <input class="form-control" name="des">
                        <p class="help-block text-info">可选填</p>
                    </div>
                </form>
            </div>
            <!-- /.modal-body -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">算了</button>
                <a id="" href="javascript:void(0)" class="btn btn-danger btn-normal active" role="button">确认添加</a>
            </div>
        </div>
        <!-- /.modal-header -->
    </div>
    <!--./modal-dialog-->
</div>
<!--/.modal -->

    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">角色权限管理</h2>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="panel panel-yellow">
        <div class="panel-heading">
            <h5 style="float: left">Yellow Panel</h5>
            <div style="text-align: right">
                <button type="button" id="addPerson" class="btn btn-primary btn-sm" style="align-items: right;" onclick="$('#addRole').modal();">新增角色</button>
            </div>
        </div>

        <div class="panel-body">
            <div class="dataTable_wrapper">
                <table class="table table-striped table-bordered table-hover" id="dataTables-user-role">
                    <thead>
                    <tr>
                        <th>角色编号</th>
                        <th>角色名称</th>
                        <th>描述信息</th>
                        <th>操作</th>
                        <th>操作</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!--
                    <tr class="odd gradeX">
                        <td>Trident</td>
                        <td>Internet Explorer 4.0</td>
                        <td>Win 95+</td>
                        <td class="center">4</td>
                        <td class="center">X</td>
                    </tr>
                    <tr class="odd gradeA">
                        <td>Trident</td>
                        <td>Internet Explorer 5.5</td>
                        <td>Win 95+</td>
                        <td class="center">5.5</td>
                        <td class="center">A</td>
                    </tr>
                    -->
                    </tbody>
                </table>
            </div>
            <!-- /.table-responsive -->
        </div>
    </div>

<!-- jQuery -->
<script src="../../js/jquery-1.12.3/jquery-1.12.3.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../../js/bootstrap-3.3.5/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="../../js/SB-admin-2-1.0.8/sb-admin-2.js"></script>

<!-- DataTables JavaScript -->
<script src="../../js/SB-admin-2-1.0.8/bower_components/datatables/media/jquery.dataTables.min.js"></script>
<script src="../../js/SB-admin-2-1.0.8/bower_components/datatables-plugins/integration/bootstrap3/dataTables.bootstrap.min.js"></script>

<script>
    var roleList = null;
    $.ajax({       //获取当前系统中所有角色信息
        url:"../../roleandauth/getrole.do",
        type:"get",
        dataType:"json",
        contentType: "application/json; charset=utf-8",
        async: false,       //必须同步执行，否则ajax后面的代码执行会有问题
        success:function(data){
            if(data == null) {
                alert("当前系统中没有角色 或者 获取角色信息失败！");
            }else {
                roleList = data;
            }
        },
        error:function() {
            alert("获取角色信息失败！");
        }
    });

    for(var i=0; i<roleList.length; i++) {
        var r = roleList[i];
        var des = r.description;
        var rId = r.roleId;
        if(des==null)
            des = "";

        $('tbody').append('<tr class="odd gradeA"><td>'+rId+'</td><td>'+r.roleName+'</td><td>'+des+'</td> <td class="center"><a class="fa fa-pencil-square" href="">修改角色</a></td> <td class="center"><a class="fa fa-key" href="">授权</a></td> <td class="center"><a class="fa fa-times-circle" href="">删除角色</a></td> </tr>');
    }

    $('#dataTables-user-role').DataTable({
        responsive: true
    });

    window.parent.iFrameHeight();   //iframe自适应高度
</script>
</body>
</html>