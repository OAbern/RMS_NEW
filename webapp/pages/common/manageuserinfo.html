<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>修改个人信息</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap-3.3.5/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../../css/SB-admin-2-1.0.8/sb-admin-2.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="../../css/SB-admin-2-1.0.8/bower_components/font-awesome/font-awesome.min.css" rel="stylesheet">
    <!-- datetimepicker CSS -->
    <link href="../../css/bootstrap-3.3.5/ex/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <!-- Bern Custom CSS -->
    <link href="../../css/ifram-common.css" rel="stylesheet">

</head>

<body>
<div class="row">
    <div class="col-lg-12">
        <h2 class="page-header">管理个人基本信息</h2>
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

<div class="row">
    <div class="col-lg-6">
        <div class="panel panel-green">
            <div class="panel-heading">

            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <form action="../../user/modifyuserinfo.do" method="post">
                    <div class="line-25-per">
                        <label>姓名</label>
                        <input class="form-control" id="userName" name="userName" >
                        <p class="help-block" id="tips1">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>所在学院</label>
                        <select class="form-control" id="college" name="cquptCollege.collegeId">
                            <option value="">请选择</option>
                        </select>
                        <p class="help-block" id="tips2">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>部门</label>
                        <input class="form-control" id="department" name="department" >
                        <p class="help-block" id="tips3">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>性别</label>
                        <select class="form-control" id="gender" name="gender">
                            <option value="男">男</option>
                            <option value="女">女</option>
                        </select>
                        <p class="help-block" id="tips4">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>籍贯</label>
                        <input class="form-control" id="origin" name="origin" >
                        <p class="help-block" id="tips5">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>民族</label>
                        <input class="form-control" id="nationality" name="nationality" >
                        <p class="help-block" id="tips6">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>出生日期</label>
                        <div class="input-group date form_date col-md-12" data-date-format="yyyy-mm-dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                            <input class="form-control" size="16" type="text" id="birthday" name="birthday" readonly >
                            <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                        <p class="help-block" id="tips7">请通过插件选择日期</p>
                    </div>

                    <div class="line-25-per">
                        <label>政治面貌</label>
                        <input class="form-control" id="politicalStatus" name="politicalStatus" >
                        <p class="help-block" id="tips8">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>参加党派时间</label>
                        <div class="input-group date form_date col-md-12" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                            <input class="form-control" size="16" type="text" id="timeJoinParty" name="timeJoinParty" readonly >
                            <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                        <p class="help-block" id="tips9">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>进入重邮时间</label>
                        <div class="input-group date form_date col-md-12" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                            <input class="form-control" size="16" type="text" id="timeBeginCqupt" name="timeBeginCqupt" readonly >
                            <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                        <p class="help-block" id="tips10">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>参加工作时间</label>
                        <div class="input-group date form_date col-md-12" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                            <input class="form-control" size="16" type="text" id="timeBeginWork" name="timeBeginWork" readonly >
                            <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                        <p class="help-block" id="tips11">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>第一学位</label>
                        <input class="form-control" id="firstDegree" name="firstDegree" >
                        <p class="help-block" id="tips12">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>第一学位专业名称</label>
                        <input class="form-control" id="firstProfessionalName" name="firstProfessionalName" >
                        <p class="help-block" id="tips13">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>第一学位毕业学校</label>
                        <input class="form-control" id="firstGraduateSchool" name="firstGraduateSchool" >
                        <p class="help-block" id="tips14">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>最后学位</label>
                        <input class="form-control" id="lastDegree" name="lastDegree" >
                        <p class="help-block" id="tips15">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>最后学位专业名称</label>
                        <input class="form-control" id="lastProfessionalName" name="lastProfessionalName" >
                        <p class="help-block" id="tips16">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>最后学位毕业学校</label>
                        <input class="form-control" id="lastGraduateSchool" name="lastGraduateSchool" >
                        <p class="help-block" id="tips17">提示</p>
                    </div>

                    <div class="line-25-per">
                        <label>最后学历</label>
                        <input class="form-control" id="lastAcademic" name="lastAcademic" >
                        <p class="help-block" id="tips18">提示</p>
                    </div>

                    <div class="row line-25-per-center tooltip-button">
                        <button type="submit" class="btn btn-circle btn-lg btn-danger" data-toggle="tooltip" data-placement="left" title="修改">改</button>
                        <button type="reset" class="btn btn-circle btn-lg btn-info" data-toggle="tooltip" data-placement="right" title="重置">置</button>
                    </div>
                </form>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-6 -->
</div>
<!-- /.row -->

<!-- jQuery -->
<script src="../../js/jquery-1.12.3/jquery-1.12.3.min.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="../../js/bootstrap-3.3.5/bootstrap.min.js"></script>
<!-- Custom Theme JavaScript -->
<script src="../../js/SB-admin-2-1.0.8/sb-admin-2.js"></script>
<!-- datetimepicker JavaScript -->
<script src="../../js/bootstrap-3.3.5/bootstrap-datetimepicker.min.js"></script>
<script src="../../js/bootstrap-3.3.5/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script>
    /**
     * 按钮提示
     */
    $('.tooltip-button').tooltip({
        selector: "[data-toggle=tooltip]",
        container: "body"
    });

    /**
     * 日历插件
     */
    $('.form_date').datetimepicker({
        language:  'zh-CN',
        format:'yyyy-mm-dd',
        weekStart: 1,
        todayBtn:  1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        minView: 2,
        forceParse: 0
    });

    var user;
    $.ajax({       //获取当前用户信息
        url:"../../user/getuserinfo.do",
        dataType:"json",
        async: false,
        success:function(data){
            user = data;
            if(user == null) {
                alert("服务器没有当前用户的信息，有可能是您的session已经过期，请您重新登录！");
                window.parent.location = "../../login.html";
            }
        },
        error:function() {
            alert('获取用户信息失败，请检查是否登录');
        }
    });

    var collegeList;
    $.ajax({       //获取当前用户信息
        url:"../../user/getcollege.do",
        dataType:"json",
        async: false,
        success:function(data){
            collegeList = data;
        },
        error:function() {
            alert('获取学院信息失败，请稍后重试');
        }
    });

    for(var i=0; i<collegeList.length; i++) {
        var c = collegeList[i];

        $('#college').append('<option value="'+c.collegeId+'">'+c.collegeName+'</option>');
    }
    if(user.cquptCollege!=null && user.cquptCollege.collegeId!=0) {
        $('#college').val(user.cquptCollege.collegeId);
    }

    //遍历字段并且往表单设值
    for(var f in user) {
        var input = $('#'+f);
        var value;
        console.log(typeof(user[f]));
        if(user[f] == null) {
            value = '';
        }else {
            value = user[f];
        }
        if(!(typeof(input)=='undefined')) {
            input.val(value);
        }
    }
</script>
</body>
</html>